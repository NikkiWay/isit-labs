# Отчёт по лабораторной работе №11  
## Дисциплина: Информационные системы и технологии  
**Студент:** Соколов Никита  
**Группа:** СГН3-64Б  
**Преподаватель:** Антонов А.И.  

---

## Цель работы

Получить навыки обработки XML-данных, получаемых с внешнего ресурса, и интеграции их в Telegram-бота. Научиться извлекать и форматировать информацию о курсах валют, используя данные с сайта Центрального банка РФ.

---

## Задание

1. Реализовать Telegram-бота, который:
   - принимает от пользователя дату;
   - по указанной дате возвращает курс заданной валюты к рублю;
   - загружает XML-файл с курсами валют с сайта ЦБ РФ;
   - извлекает нужный курс из XML и отправляет его пользователю.

2. Использовать библиотеку `requests` для загрузки XML.

3. Использовать `xml.dom.minidom` для парсинга XML.

4. (Дополнительно) — реализовать встроенную клавиатуру Telegram с выбором не менее двух валют.

---

## Ход выполнения

1. Создан Telegram-бот через [@BotFather](https://t.me/BotFather), получен токен доступа.
2. Разработан скрипт `lab11.py` на языке Python с использованием библиотек:
   - `telebot` (pyTelegramBotAPI) — для работы с Telegram Bot API;
   - `requests` — для загрузки XML;
   - `xml.dom.minidom` — для разбора структуры XML-файла.
3. Бот реализует диалог:
   - отправляет клавиатуру с кнопками (например, USD, EUR);
   - запрашивает дату в формате `ДД.ММ.ГГГГ`;
   - формирует HTTP-запрос к ЦБ РФ по адресу  
     `https://www.cbr.ru/scripts/XML_daily.asp?date_req=ДД/ММ/ГГГГ`;
   - загружает XML-документ и парсит его;
   - извлекает значение курса нужной валюты по тегам `<Valute>`, `<CharCode>`, `<Value>`;
   - отправляет пользователю результат.
4. При ошибках (неправильный формат даты, проблемы с сетью или отсутствием валюты) бот выдает соответствующее сообщение.

---

## Пример работы

**Пользователь:** USD  
**Пользователь:** 02.06.2025  
**Бот:** Курс USD на 02.06.2025: 89.1245 руб.


---

## Результаты

- ✔ Telegram-бот успешно создан и принимает команды.
- ✔ XML-файл курсов валют загружается с сайта ЦБ РФ.
- ✔ Курс валюты корректно извлекается из XML и форматируется.
- ✔ Реализована встроенная клавиатура с выбором валют.
- ✔ Обеспечена обработка пользовательского ввода и ошибок.

---

## Выводы

В процессе лабораторной работы были освоены:
- основы работы с XML-документами с помощью `xml.dom.minidom`;
- доступ к внешнему API (ЦБ РФ) через HTTP;
- реализация Telegram-бота, обрабатывающего пользовательский ввод;
- формирование ответов на основе парсинга данных;
- создание пользовательского интерфейса с клавиатурой в Telegram.

Данная работа иллюстрирует возможности интеграции государственных открытых API с пользовательскими сервисами, такими как боты.

---

## Приложения

- `lab11.py` — основной скрипт Telegram-бота.

### Используемые технологии и библиотеки

- Python 3  
- pyTelegramBotAPI  
- requests  
- xml.dom.minidom  

### Источники

- [ЦБ РФ: XML API](https://www.cbr.ru/development/SXML/)
- [pyTelegramBotAPI](https://github.com/eternnoir/pyTelegramBotAPI)
- [Telegram Bot API](https://core.telegram.org/bots/api)
